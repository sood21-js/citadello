# citadello

# Задача №1 
### Установка 
- Установка зависимостей через `yarn`

### Запуск

- Сервера: `yarn dev`
- Тесты: `yarn test`

### Использование

После запуска используем эндпоинт:
`http://localhost:3000/api/delivery/options`

Отправляем POST запрос с телом:

```json
{
  "cart": {
    "weight": 3.0,
    "dimensions": {
      "length": 25,
      "width": 15,
      "height": 10
    },
    "total": 1800
  },
  "address": {
    "city": "Казань",
    "street": "Кремлевская",
    "house": "35"
  }
}
```
### Комментарий по работе сервера
- Сервер опрашивает 3 провайдера, 2 по заданию + один который периодически ошибит
- Можно использовать значение `MAX_PROVIDER_TIMEOUT` для установки максимального таймаута для ответа от провайдера
- В случае если провайдер ошибит, то сервис делает повторные запросы в рамках `MAX_PROVIDER_TIMEOUT`

# Задача №2

Определяем, что из текущего списка критическими являютсяя - баг на проде и задача от CEO

### Оптимистичный сценарий

1. Организую встречу между QA и разработчиками для определения, кто может выполнить задачи качественнее и быстрее. Приоритет отдаётся заблокированному разработчику. Если получилось распределить задачи идем к следующему этапу.
2. Беру на контроль выполнение этих задач (ежечасные синки по статусу, в некоторых случаях — парное программирование).
3. Если задачи распределены не на меня и заблокированного разработчика, обсуждаем с ним проблему и возможные пути решения блокера, продолжая выполнять свои задачи.

### Пессимистичный сценарий
(В случае, когда никто из команды, кроме меня, не может выполнить текущие задачи)

1. Определяем с бизнесовой точки зрения задачу высшего приоритета, которая принесёт наибольший доход (или наибольший убыток).
2. Обращаюсь к CEO с предложением обсудить последовательность выполнения задач:

> "Добрый день! Возвращаюсь с обратной связью по вашей задаче. Мы обнаружили критический баг, из-за которого мы и наши клиенты теряем деньги. Учитывая текущие ресурсы, мы можем взять только одну из задач. Могу ли я получить дополнительную информацию о рекламной акции, чтобы определить, какую задачу выполнить в первую очередь? Может быть есть возможность немного сдвинуть сроки начала акции?"

3. Договариваемся о приоритетах с CEO и берём в работу критические задачи.
4. Только после выполнения критических задач, обсуждаю с коллегой пути решения блокера и возвращаюсь к своим текущим задачам.

## Технические действия

### Для бага в продакшене:
- Выявляем проблемный сервис через логи или воспроизведение сценария
- Привлекаем ответственного разработчика за сервис (или того, кто знает его лучше всех)
- Пытаемся локализовать проблему для определения объёма работ
- Выполняем исправление

### Для задачи от CEO:
- Определяем техническую реализацию и предварительную оценку
- Назначаем ответственного разработчика

# Задача №3

## Технические метрики

### Мониторинг логов
- **Отслеживание ошибок** — анализ частоты, типа и критичности ошибок, выявление причин сбоев
- **Статусы процессов** — мониторим успешные выполнения ключевых операций фичи, отслеживаем время выполнения
- **Инструменты**: 
  - Grafana — для визуализации и создания дашбордов
  - Yandex Logging — для сбора, хранения и анализа логов

### Производительность и ресурсы
- **Потребление CPU** — отслеживание нагрузки на процессор, выявление аномальных скачков, мониторинг трендов
- **Использование RAM** — контроль потребления памяти, обнаружение утечек, анализ эффективности использования
- **Дополнительные метрики**: 
  - Время отклика сервисов
  - Пропускная способность
  - Использование дискового пространства

### Мониторинг бизнес-логики
- **Целостность цепочки событий** — проверка корректности выполнения всех этапов бизнес-процесса
- **Валидация данных** — контроль качества и согласованности данных на каждом этапе
- **Тайминги операций** — отслеживание времени выполнения ключевых бизнес-процессов

## Бизнес-метрики

### Аналитика новой фичи
- **Внешние инструменты**: Google Analytics, Yandex Metrika для сбора базовой статистики
- **Кастомная аналитика**: Трекинг специфических событий продукта, Анализ глубины использования фичи

### Конверсия пользователей: 
- Есть ли ощутимые изменения по основным показателям 

### Количество новых пользователей
- Есть ли ощутимы приток или отток пользователей

### Ценность для пользователей
- **Показатели вовлеченности**:
  - Глубина использования продукта
  - Частота возврата пользователей
  - Количество выполняемых действий
- **Монитезация** — рост среднего чека, частоты покупок
- **Удовлетворенность** — качественные показатели оценки продукта, обращения в службу поддержки

### Отток клиентов
- Расчет коэффициента оттока по периодам, анализ поведения перед уходом